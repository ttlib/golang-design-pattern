# 设计模式 - 单例模式

单例模式是某个类只能生成一个实例，该类提供了一个全局访问点供外部获取该实例，其拓展是有限多例模式。

## 使用场景
1. 程序中的计数器
2. 产生唯一的序列号
3. 创建一个需要消耗过多资源的对象，比如I/O与数据库连接等
4. 控制实例数量，节约系统资源等

## 认识
在Go语言中可以有好几种方法实现单例模式，区别在于线程安全与线程非安全，而真正可以在生产中使用的是线程安全的单例模式防止对象克隆和序列化破坏单例模式。单例模式一般两种实现模式

- 饿汉模式
不管需不需要用到实例都要去创建实例，在程序运行的时候就创建好实例，一种空间换时间的做法。

- 懒汉模式
需要用到创建实例了程序再去创建实例，一种时间换空间的做法。

来举个例子，在我们的系统中肯定有日志器，打印、记录日志，日志器Logger对象在你的程序中无处不在。这个日志器应该只初始化一次到处可用。

[image]

让我们从类图的角度来看下

[image]

## Go代码

## 分析
优点
1. 在内存里只有一个实力，减少了内存的开销，尤其是频繁的创建和销毁实例
2. 避免对资源的多重占用

缺点：
1. 与单一职责原则冲突，只有内部逻辑
